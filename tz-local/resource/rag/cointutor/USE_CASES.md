# CoinTutor 유스케이스 명세서

## 📋 개요

CoinTutor는 암호화폐 투자 정보를 제공하는 구독 기반 튜터링 플랫폼입니다. 이 문서는 시스템의 주요 사용자(액터)들이 어떻게 시스템과 상호작용하는지를 시나리오 기반으로 정의합니다.

**문서 목적**: 사용자 스토리 및 유스케이스를 통한 기능 요구사항 명확화  
**대상 독자**: 개발팀, 기획팀, QA팀  
**작성일**: 2025-12-02

---

## 👥 액터(Actor) 정의

### 1. 일반 사용자 (General User)
- **설명**: 암호화폐 투자 정보를 받기 위해 튜터를 구독하는 사용자
- **권한**: 튜터 검색/구독, 추천 조회, 알림 받기
- **목표**: 신뢰할 수 있는 투자 정보를 얻어 수익을 올리는 것

### 2. 튜터 (Tutor)
- **설명**: 암호화폐 투자 추천을 제공하는 전문가
- **권한**: 코인 추천 등록/수정/삭제, 프로필 관리, 구독자 통계 조회
- **목표**: 정확한 추천을 통해 신뢰도를 높이고 구독자를 늘리는 것

### 3. 관리자 (Administrator)
- **설명**: 플랫폼을 관리하고 운영하는 시스템 관리자
- **권한**: 모든 데이터 접근, 사용자/튜터 관리, 시스템 설정
- **목표**: 안정적인 플랫폼 운영 및 사용자 만족도 향상

### 4. 시스템 (System)
- **설명**: 자동화된 백그라운드 프로세스
- **기능**: 추천 달성 확인, 구독 만료 처리, 알림 발송, 통계 업데이트

---

## 🎯 유스케이스 다이어그램

```
┌─────────────────────────────────────────────────────────────────┐
│                        CoinTutor System                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                   │
│   [일반 사용자]                [튜터]              [관리자]      │
│        │                        │                      │          │
│        ├─ 회원가입/로그인       ├─ 튜터 등록         ├─ 사용자 관리
│        ├─ 튜터 검색             ├─ 프로필 관리       ├─ 튜터 승인
│        ├─ 튜터 상세 조회        ├─ 추천 등록         ├─ 콘텐츠 관리
│        ├─ 튜터 구독             ├─ 추천 수정/삭제    ├─ 통계 조회
│        ├─ 구독 해지             ├─ 성과 확인         ├─ 시스템 설정
│        ├─ 추천 목록 조회        ├─ 구독자 조회       ├─ 로그 관리
│        ├─ 코인 정보 조회        ├─ 수익 관리         └─ 백업/복원
│        ├─ 알림 확인             └─ 알림 발송
│        ├─ 프로필 관리
│        └─ 결제 내역 조회
│                                                                   │
│   [시스템 자동화]                                                │
│        ├─ 추천 달성 자동 확인                                    │
│        ├─ 구독 만료 처리                                         │
│        ├─ 코인 시세 업데이트                                     │
│        ├─ 튜터 통계 업데이트                                     │
│        └─ 정기 알림 발송                                         │
│                                                                   │
└─────────────────────────────────────────────────────────────────┘
```

---

## 📖 일반 사용자 유스케이스

### UC-001: 회원가입 및 로그인

#### 시나리오 1: Google OAuth로 회원가입
```
사용자 스토리:
"암호화폐 투자에 관심이 있는 김민수는 CoinTutor를 알게 되었고, 
간편하게 Google 계정으로 가입하여 서비스를 이용하고 싶다."

단계:
1. 김민수가 CoinTutor 홈페이지에 접속한다
2. "Google로 시작하기" 버튼을 클릭한다
3. Google 로그인 페이지로 리디렉션된다
4. Google 계정 정보를 입력하고 인증한다
5. CoinTutor가 권한 요청을 표시한다 (이메일, 프로필 정보)
6. 김민수가 "허용" 버튼을 클릭한다
7. CoinTutor 메인 페이지로 리디렉션되며 회원가입이 완료된다
8. 환영 알림이 표시된다: "환영합니다, 김민수님!"

사후조건:
- User 및 UserProfile 레코드가 생성된다
- 세션이 생성되고 로그인 상태가 유지된다
- 기본 언어는 브라우저 설정에 따라 자동 설정된다

예외 상황:
- E1: Google 인증 실패 → "Google 로그인에 실패했습니다" 메시지
- E2: 이미 가입된 이메일 → 자동으로 로그인 처리
- E3: 네트워크 오류 → "네트워크 연결을 확인해주세요" 메시지
```

#### 시나리오 2: 언어 및 타임존 설정
```
사용자 스토리:
"일본에 거주하는 김민수는 인터페이스를 일본어로 보고, 
모든 시간을 일본 시간(JST)으로 표시하고 싶다."

단계:
1. 김민수가 회원가입 후 프로필 설정 페이지에 접속한다
2. 언어 설정 드롭다운을 클릭한다
3. 사용 가능한 언어 목록이 표시된다:
   - 한국어 (ko)
   - English (en)
   - 日本語 (ja)
   - 中文 (zh)
   - Español (es)
   - Français (fr)
4. "日本語" 를 선택한다
5. 인터페이스가 즉시 일본어로 변경된다
6. 타임존 설정 드롭다운을 클릭한다
7. "Asia/Tokyo (JST, UTC+9)" 를 선택한다
8. "저장" 버튼을 클릭한다
9. 설정이 저장되고 모든 시간 표시가 일본 시간으로 변경된다
10. 예: "2025-12-02 18:00 JST" (UTC 09:00)

사후조건:
- UserProfile.language = 'ja'
- UserProfile.timezone = 'Asia/Tokyo'
- 모든 텍스트가 일본어로 표시
- 모든 시간이 JST로 표시

예외 상황:
- E1: 지원하지 않는 타임존 → 기본 UTC 사용
```

#### 시나리오 3: 이메일 인증 완료
```
사용자 스토리:
"김민수는 회원가입 후 이메일 인증을 완료하여 
모든 기능을 사용할 수 있게 되고 싶다."

단계:
1. 김민수가 회원가입 후 프로필 페이지에 접속한다
2. "이메일 인증 필요" 배너가 표시된다
3. "인증 메일 발송" 버튼을 클릭한다
4. 시스템이 등록된 이메일로 인증 링크를 발송한다
5. 김민수가 이메일을 확인하고 인증 링크를 클릭한다
6. 브라우저가 인증 완료 페이지를 표시한다
7. "이메일이 인증되었습니다" 메시지가 표시된다
8. 프로필에서 "인증 완료" 배지가 표시된다

사후조건:
- UserProfile.email_verified = True
- 모든 기능 (구독, 알림 등) 사용 가능

예외 상황:
- E1: 만료된 토큰 → "인증 링크가 만료되었습니다. 다시 발송해주세요"
- E2: 잘못된 토큰 → "유효하지 않은 인증 링크입니다"
```

---

### UC-002: 튜터 검색 및 발견

#### 시나리오 1: 상위 랭킹 튜터 탐색
```
사용자 스토리:
"김민수는 신뢰할 수 있는 튜터를 찾기 위해 
성공률이 높고 인기 있는 상위 랭킹 튜터를 둘러보고 싶다."

단계:
1. 김민수가 "튜터 랭킹" 메뉴를 클릭한다
2. 시스템이 등급 및 온도 기준으로 정렬된 튜터 목록을 표시한다
3. 각 튜터의 카드에는 다음 정보가 표시된다:
   - 프로필 이미지
   - 닉네임
   - 등급 배지 (Diamond, Platinum, Gold 등)
   - 온도 (🔥 85°C)
   - 성공률 (87.5%)
   - 총 추천 수 (124개)
   - 구독자 수 (1,234명)
   - 구독료 ($29.99/월)
4. 김민수가 관심 있는 튜터의 카드를 클릭한다
5. 튜터 상세 페이지로 이동한다

사후조건:
- 조회 로그가 기록된다 (Analytics)
- 최근 본 튜터 목록에 추가된다

예외 상황:
- E1: 튜터가 없음 → "아직 등록된 튜터가 없습니다" 메시지
- E2: 네트워크 지연 → 로딩 스피너 표시
```

#### 시나리오 2: 필터 및 검색으로 튜터 찾기
```
사용자 스토리:
"김민수는 비트코인 추천을 많이 하고 성공률이 80% 이상인 
튜터만 보고 싶다."

단계:
1. 김민수가 "튜터 목록" 페이지에 접속한다
2. 검색창에 "BTC" 또는 "비트코인"을 입력한다
3. 필터 옵션을 선택한다:
   - 최소 성공률: 80%
   - 등급: Gold 이상
   - 정렬: 성공률 높은 순
4. "적용" 버튼을 클릭한다
5. 시스템이 필터링된 튜터 목록을 표시한다
6. "총 15명의 튜터가 검색되었습니다" 메시지가 표시된다

사후조건:
- 필터 조건이 URL 파라미터로 저장된다
- 검색 이력이 저장된다 (로그인 사용자)

예외 상황:
- E1: 검색 결과 없음 → "조건에 맞는 튜터가 없습니다. 필터를 조정해보세요"
- E2: 잘못된 필터 값 → 기본값으로 자동 조정
```

---

### UC-003: 튜터 구독

#### 시나리오 1: 튜터 구독 및 USDT 결제
```
사용자 스토리:
"김민수는 마음에 드는 튜터를 발견했고, 
USDT 코인으로 구독료를 결제하여 해당 튜터의 추천을 받고 싶다."

결제 방식 선정 배경:
- 국내에서 코인 관련 지속적인 결제 시스템 승인이 어려움
- 사유: 사행성 조장 우려로 인한 금융당국의 규제
- 해결책: USDT (Tether) 스테이블코인을 통한 결제 시스템 도입
- 장점: 달러 연동 안정성, 국제 거래 용이, 빠른 결제 처리

단계:
1. 김민수가 튜터 상세 페이지에서 "구독하기" 버튼을 클릭한다
2. 구독 정보 확인 모달이 표시된다:
   - 튜터: CryptoKing
   - 구독료: 29.99 USDT/월
   - 첫 결제일: 오늘
   - 다음 결제일: 2025-01-02
   - 자동 갱신: 활성화
3. 결제 방법: USDT (TRC-20/ERC-20 네트워크 선택)
4. 플랫폼에서 제공하는 USDT 입금 주소가 표시된다
5. QR 코드 또는 주소 복사로 송금
6. 블록체인 확인 대기 (약 1-5분)
7. 결제 성공 메시지가 표시된다
8. 튜터의 추천 목록 페이지로 자동 이동한다
9. 이메일로 결제 영수증이 발송된다

사후조건:
- Subscription 레코드 생성 (status: active)
- BillingHistory 레코드 생성 (payment_status: completed)
- 튜터의 구독자 수 +1
- 튜터에게 "새 구독자" 알림 발송

예외 상황:
- E1: 결제 실패 → "결제에 실패했습니다. 카드 정보를 확인해주세요"
- E2: 이미 구독 중 → "이미 이 튜터를 구독하고 있습니다"
- E3: 이메일 미인증 → "이메일 인증이 필요합니다"
```

#### 시나리오 2: 구독 해지
```
사용자 스토리:
"김민수는 튜터의 추천이 기대에 미치지 못해서 
구독을 해지하고 싶다."

단계:
1. 김민수가 "내 구독" 페이지에 접속한다
2. 구독 중인 튜터 목록이 표시된다
3. "CryptoKing" 튜터의 "구독 관리" 버튼을 클릭한다
4. "구독 해지" 옵션을 선택한다
5. 해지 사유를 선택한다 (선택사항):
   - 추천이 기대에 미치지 못함
   - 가격이 비쌈
   - 더 이상 필요 없음
   - 기타
6. 확인 모달이 표시된다:
   - "정말 구독을 해지하시겠습니까?"
   - "현재 결제 기간 종료일(2025-01-02)까지 서비스를 이용할 수 있습니다"
   - "자동 갱신이 중지됩니다"
7. "확인" 버튼을 클릭한다
8. 구독이 해지되고 상태가 "취소됨(만료 예정)"으로 변경된다
9. 확인 이메일이 발송된다

사후조건:
- Subscription.status = 'cancelled'
- Subscription.cancelled_at = NOW()
- 자동 갱신 중지
- 만료일까지 서비스 이용 가능

예외 상황:
- E1: 이미 해지된 구독 → "이미 해지된 구독입니다"
- E2: 환불 기간 내 → 환불 옵션 표시
```

---

### UC-004: 코인 추천 조회

#### 시나리오 1: 구독한 튜터의 최신 추천 확인
```
사용자 스토리:
"김민수는 매일 아침 구독한 튜터들의 최신 추천을 확인하여 
투자 결정에 참고하고 싶다."

단계:
1. 김민수가 CoinTutor 앱을 열고 로그인한다
2. 홈 대시보드가 표시된다
3. "내 튜터들의 최신 추천" 섹션이 상단에 표시된다
4. 구독 중인 3명의 튜터의 추천이 카드 형태로 나열된다:
   
   [튜터: CryptoKing]
   - 코인: Bitcoin (BTC)
   - 현재 가격: $42,350
   - 목표 가격: $50,000 (+18.1%)
   - 목표일: 2025-03-01 (사용자 타임존: 2025-03-01 09:00 JST)
   - 설명: "비트코인 ETF 승인으로 큰 상승 예상..." (사용자 언어로 표시)
   - 상태: 진행 중 🟡
   - 등록일: 2시간 전 (2025-12-02 16:00 JST)
   
5. 김민수가 관심 있는 추천 카드를 클릭한다
6. 추천 상세 페이지로 이동한다:
   - 상세 분석 및 근거
   - 실시간 가격 차트
   - 목표 달성률: 8.5%
   - 진행 바 표시
   - "내 포트폴리오에 추가" 버튼
   - "알림 설정" 버튼

사후조건:
- 조회 로그 기록
- "읽음" 상태로 표시

예외 상황:
- E1: 구독한 튜터 없음 → "튜터를 구독하여 추천을 받아보세요" CTA
- E2: 최신 추천 없음 → "아직 새로운 추천이 없습니다"
```

#### 시나리오 2: 달성된 추천 확인
```
사용자 스토리:
"김민수는 자신이 구독한 튜터의 추천이 얼마나 정확했는지 
달성된 추천 목록을 통해 확인하고 싶다."

단계:
1. 김민수가 튜터 상세 페이지에 접속한다
2. "성공한 추천" 탭을 클릭한다
3. 달성된 추천 목록이 시간순으로 표시된다:
   
   [✅ 달성 완료]
   - 코인: Ethereum (ETH)
   - 추천가: $2,100
   - 목표가: $2,500 (+19%)
   - 달성가: $2,520 (+20%)
   - 달성일: 2025-01-15 (예상보다 5일 빠름)
   - 평가: 목표 초과 달성 🎉
   
4. 각 추천의 상세 분석을 볼 수 있다
5. 필터 옵션:
   - 기간: 최근 1개월, 3개월, 6개월, 전체
   - 코인 종류: BTC, ETH, 알트코인
   - 정렬: 수익률 높은 순, 최신 순

사후조건:
- 통계 정보 캐싱

예외 상황:
- E1: 달성된 추천 없음 → "아직 달성된 추천이 없습니다"
```

---

### UC-005: 알림 관리

#### 시나리오 1: 목표 달성 알림 받기
```
사용자 스토리:
"김민수는 구독한 튜터의 추천이 목표 가격에 도달했을 때 
즉시 알림을 받아 대응하고 싶다."

단계:
1. 튜터의 Bitcoin 추천이 목표 가격 $50,000에 도달한다
2. 시스템이 자동으로 목표 달성을 감지한다
3. CoinRecommendation.status가 'achieved'로 업데이트된다
4. 구독자들에게 알림이 발송된다:
   - 푸시 알림: "🎉 CryptoKing의 BTC 추천이 목표가에 도달했습니다!"
   - 이메일: 상세한 달성 내역
   - 앱 내 알림: 알림 센터에 표시
5. 김민수가 알림을 클릭한다
6. 해당 추천의 상세 페이지로 이동한다
7. 달성 축하 메시지와 함께 상세 정보가 표시된다:
   - 추천가: $42,350
   - 목표가: $50,000
   - 달성가: $50,125
   - 수익률: +18.4%
   - 달성 기간: 45일

사후조건:
- Notification 레코드 생성
- 튜터의 success_rate 재계산
- 튜터의 온도(temperature) 상승

예외 상황:
- E1: 알림 비활성화 → 앱 내 알림만 생성
- E2: 푸시 권한 없음 → 이메일 알림만 발송
```

---

## 👨‍🏫 튜터 유스케이스

### UC-101: 튜터 등록 및 승인

#### 시나리오 1: 튜터 신청
```
사용자 스토리:
"투자 경험이 풍부한 박지훈은 자신의 지식을 공유하고 수익을 얻기 위해 
CoinTutor의 튜터로 등록하고 싶다."

단계:
1. 박지훈이 일반 사용자로 로그인한다
2. 프로필 메뉴에서 "튜터 되기" 버튼을 클릭한다
3. 튜터 신청 페이지가 표시된다
4. 필수 정보를 입력한다:
   - 닉네임: "CryptoMaster"
   - 프로필 이미지 업로드
   - 자기소개 (한국어): "10년간의 암호화폐 투자 경험..."
   - 투자 전략 설명
   - 주요 관심 코인
   - 희망 구독료: $29.99/월
   - 포트폴리오 링크 (선택)
   - 자격 증명 (선택): 트레이딩 경력, 수익 증빙
5. 약관에 동의한다:
   - 튜터 이용 약관
   - 수수료 정책 (플랫폼 수수료 20%)
   - 정확한 정보 제공 책임
6. "신청하기" 버튼을 클릭한다
7. 신청 완료 메시지가 표시된다:
   "튜터 신청이 완료되었습니다. 검토 후 2-3일 내에 결과를 알려드립니다."
8. 이메일로 신청 접수 확인서가 발송된다
9. 관리자에게 "새 튜터 신청" 알림이 발송된다

사후조건:
- Tutor 레코드 생성 (is_active: false)
- UserProfile.role = 'tutor_role' (대기)
- 신청 이력 저장

예외 상황:
- E1: 닉네임 중복 → "이미 사용 중인 닉네임입니다"
- E2: 필수 정보 미입력 → 해당 필드 강조 표시
- E3: 이미 튜터 → "이미 튜터로 등록되어 있습니다"
```

#### 시나리오 2: 튜터 승인 대기 및 활성화
```
사용자 스토리:
"박지훈은 관리자의 검토를 거쳐 튜터로 승인받고 
활동을 시작하고 싶다."

단계:
1. 관리자가 박지훈의 튜터 신청을 검토한다
2. 포트폴리오와 자격 증명을 확인한다
3. 승인 또는 거절을 결정한다
4. [승인 시] 관리자가 "승인" 버튼을 클릭한다
5. 박지훈에게 승인 알림이 발송된다:
   - 푸시 알림: "🎉 튜터 승인이 완료되었습니다!"
   - 이메일: 튜터 가이드 및 시작 방법 안내
6. 박지훈이 로그인하면 "튜터 모드" 메뉴가 표시된다
7. 튜터 대시보드에 접근할 수 있다
8. 첫 추천을 등록할 수 있는 안내 메시지가 표시된다

사후조건:
- Tutor.is_active = true
- UserProfile.is_tutor = true
- 초기 등급: Bronze
- 초기 온도: 36°C

예외 상황:
- E1: 거절 시 → 거절 사유와 함께 알림 발송
- E2: 추가 정보 필요 → "추가 정보 요청" 메시지 발송
```

---

### UC-102: 코인 추천 등록

#### 시나리오 1: 새로운 추천 등록
```
사용자 스토리:
"튜터 박지훈은 Bitcoin이 향후 2개월 내에 20% 상승할 것으로 예상하고 
이를 구독자들과 공유하고 싶다."

단계:
1. 박지훈이 튜터 대시보드에 로그인한다
2. "새 추천 등록" 버튼을 클릭한다
3. 추천 등록 폼이 표시된다
4. 코인 검색:
   - 검색창에 "Bitcoin" 또는 "BTC" 입력
   - 자동완성으로 코인 목록 표시
   - Bitcoin (BTC) 선택
5. 추천 정보 입력:
   - 현재 가격: $42,350 (자동 입력)
   - 목표 가격: $50,000
   - 목표 달성일: 2025-03-01
   - 자동 계산된 상승률: +18.1%
6. 분석 내용 작성 (한국어):
   - 제목: "비트코인 ETF 승인 후 강세 예상"
   - 상세 분석: "최근 비트코인 ETF 승인으로..."
   - 주요 근거:
     * ETF 승인으로 기관 투자자 유입 예상
     * 역사적 패턴 분석
     * 기술적 지표 (RSI, MACD) 긍정적
   - 리스크 요인: "규제 불확실성, 거시경제 변동"
7. 미리보기로 확인
8. "등록" 버튼을 클릭한다
9. 확인 모달:
   "이 추천이 구독자들에게 즉시 공개됩니다. 등록하시겠습니까?"
10. "확인" 클릭
11. 추천이 등록되고 성공 메시지 표시
12. 구독자들에게 알림이 발송된다
13. 자동 번역이 백그라운드에서 실행된다 (한국어 → 영어)

사후조건:
- CoinRecommendation 레코드 생성
- 구독자들에게 "새 추천" 알림 발송
- Tutor.total_recommendations += 1
- 튜터의 온도(temperature) 상승

예외 상황:
- E1: 목표일이 과거 → "목표일은 미래 날짜여야 합니다"
- E2: 목표가가 현재가보다 낮음 → 경고 메시지 (하락 예측 가능)
- E3: 필수 정보 누락 → 해당 필드 강조
```

#### 시나리오 2: 추천 수정
```
사용자 스토리:
"박지훈은 시장 상황이 변경되어 Bitcoin 추천의 목표 가격을 
상향 조정하고 싶다."

단계:
1. 박지훈이 "내 추천 관리" 페이지에 접속한다
2. 진행 중인 Bitcoin 추천을 선택한다
3. "수정" 버튼을 클릭한다
4. 수정 가능한 필드:
   - 목표 가격: $50,000 → $55,000 (수정)
   - 목표일: 2025-03-01 (유지)
   - 분석 내용: 최신 정보 추가
5. 변경 사유 작성:
   "미국 연준의 금리 인하 가능성 증가로 목표가 상향"
6. "저장" 버튼 클릭
7. 확인 모달:
   "이 추천의 수정 내역이 구독자들에게 알림으로 전송됩니다."
8. "확인" 클릭
9. 수정이 저장되고 구독자들에게 알림 발송:
   "📝 CryptoMaster의 BTC 추천이 업데이트되었습니다"

사후조건:
- CoinRecommendation 업데이트
- 수정 이력 저장
- 구독자들에게 업데이트 알림

예외 상황:
- E1: 이미 달성/실패된 추천 → 수정 불가
- E2: 목표가를 현재가보다 낮게 변경 → 경고 표시
```

---

### UC-103: 성과 및 통계 확인

#### 시나리오 1: 대시보드에서 전체 통계 확인
```
사용자 스토리:
"박지훈은 자신의 튜터 활동 성과를 한눈에 파악하고 
개선점을 찾고 싶다."

단계:
1. 박지훈이 튜터 대시보드에 접속한다
2. 상단에 주요 지표가 카드 형태로 표시된다:

   ┌─────────────────────────────────────────────────────────┐
   │  총 구독자: 1,234명 (+45 이번 달)                      │
   │  활성 구독: 1,180명                                     │
   │  월 수익: $29,106 (플랫폼 수수료 차감 후 $23,285)      │
   └─────────────────────────────────────────────────────────┘
   
   ┌─────────────────────────────────────────────────────────┐
   │  총 추천: 124개                                          │
   │  성공: 87개 (70.2%)                                      │
   │  실패: 32개 (25.8%)                                      │
   │  진행중: 5개 (4.0%)                                      │
   │  평균 목표 수익률: +22.3%                               │
   └─────────────────────────────────────────────────────────┘
   
   ┌─────────────────────────────────────────────────────────┐
   │  등급: Gold 🥇                                           │
   │  온도: 85°C 🔥                                           │
   │  랭킹: 전체 15위                                         │
   │  다음 등급까지: 성공률 +5%p                             │
   └─────────────────────────────────────────────────────────┘

3. 아래에 상세 차트가 표시된다:
   - 시간별 구독자 증가 추이 (라인 차트)
   - 월별 수익 추이 (바 차트)
   - 코인별 추천 분포 (파이 차트)
   - 성공/실패 추천 (도넛 차트)

4. 최근 활동 타임라인:
   - 2시간 전: 새 구독자 +3
   - 5시간 전: ETH 추천 목표 달성 ✅
   - 1일 전: 새 추천 등록 (SOL)

사후조건:
- 통계 데이터 캐싱
- 조회 로그 기록

예외 상황:
- E1: 데이터 로딩 실패 → "통계를 불러오지 못했습니다. 새로고침해주세요"
```

---

### UC-104: 구독자 관리

#### 시나리오 1: 구독자 목록 조회
```
사용자 스토리:
"박지훈은 자신을 구독하는 사용자들의 정보를 확인하고 
충성도 높은 구독자를 파악하고 싶다."

단계:
1. 박지훈이 "구독자 관리" 페이지에 접속한다
2. 구독자 목록이 테이블 형태로 표시된다:

   | 사용자명    | 구독 시작일   | 상태   | 구독 기간 | 활동도 |
   |------------|--------------|--------|-----------|--------|
   | user123    | 2024-06-15   | 활성   | 6개월     | ⭐⭐⭐⭐⭐ |
   | investor99 | 2024-11-01   | 활성   | 1개월     | ⭐⭐⭐ |
   | crypto_fan | 2024-10-20   | 취소됨 | 2개월     | ⭐⭐ |

3. 필터 및 정렬 옵션:
   - 상태: 전체, 활성, 취소됨, 만료됨
   - 정렬: 구독일 순, 이름 순, 활동도 순
   - 검색: 사용자명으로 검색

4. 각 구독자의 상세 정보 보기:
   - 구독 기간
   - 알림 열람률
   - 피드백/리뷰 (있는 경우)

사후조건:
- 구독자 통계 업데이트

예외 상황:
- E1: 구독자 없음 → "아직 구독자가 없습니다" 안내
```

---

## 👨‍💼 관리자 유스케이스

### UC-201: 사용자 관리

#### 시나리오 1: 사용자 검색 및 상세 정보 조회
```
사용자 스토리:
"관리자는 특정 사용자의 활동 내역과 문제를 파악하여 
적절한 조치를 취하고 싶다."

단계:
1. 관리자가 관리자 대시보드에 로그인한다
2. "사용자 관리" 메뉴를 클릭한다
3. 사용자 검색:
   - 이메일, 이름, ID로 검색
   - "kim@example.com" 입력
4. 검색 결과가 표시된다
5. 사용자 상세 정보 조회:
   
   ┌─────────────────────────────────────────────────────────┐
   │ 기본 정보                                               │
   │ - ID: 1234                                              │
   │ - 이름: 김민수                                          │
   │ - 이메일: kim@example.com (인증됨 ✓)                   │
   │ - 역할: user_role                                       │
   │ - 가입일: 2024-06-15                                    │
   │ - 마지막 로그인: 2025-12-02 09:30                       │
   │ - 상태: 활성                                            │
   └─────────────────────────────────────────────────────────┘
   
   ┌─────────────────────────────────────────────────────────┐
   │ 활동 통계                                               │
   │ - 구독 중인 튜터: 3명                                   │
   │ - 총 결제 금액: $359.88                                 │
   │ - 알림 수신: 활성                                       │
   │ - 신고 내역: 0건                                        │
   └─────────────────────────────────────────────────────────┘
   
   ┌─────────────────────────────────────────────────────────┐
   │ 최근 활동                                               │
   │ - 2025-12-02: BTC 추천 조회                            │
   │ - 2025-12-01: 새 튜터 구독 (CryptoMaster)              │
   │ - 2025-11-30: 로그인                                    │
   └─────────────────────────────────────────────────────────┘

6. 관리 액션 버튼:
   - 이메일 발송
   - 계정 정지
   - 역할 변경
   - 튜터 승급
   - 로그 조회

사후조건:
- 조회 이력 저장

예외 상황:
- E1: 사용자 없음 → "해당 사용자를 찾을 수 없습니다"
```

---

### UC-202: 튜터 승인 및 관리

#### 시나리오 1: 신규 튜터 신청 검토
```
사용자 스토리:
"관리자는 신규 튜터 신청을 검토하여 
플랫폼의 품질을 유지하고 싶다."

단계:
1. 관리자 대시보드에 "새 튜터 신청 3건" 알림이 표시된다
2. "튜터 관리" → "신청 대기" 메뉴를 클릭한다
3. 대기 중인 튜터 신청 목록이 표시된다:

   | 신청자      | 신청일      | 희망 닉네임   | 구독료 | 상태   |
   |------------|------------|-------------|-------|--------|
   | 박지훈      | 2025-12-01 | CryptoMaster| $29.99| 검토중 |
   | 이수진      | 2025-12-02 | EthQueen    | $39.99| 신규   |
   | 최민호      | 2025-11-30 | BtcKing     | $49.99| 검토중 |

4. "박지훈"의 신청서를 클릭하여 상세 내역 확인:
   - 자기소개
   - 투자 경력: 10년
   - 포트폴리오: [링크]
   - 트레이딩 증빙 자료
   - 주요 전략: 기술적 분석 + 펀더멘털 분석

5. 검토 체크리스트:
   - [✓] 프로필 정보 충실성
   - [✓] 투자 경력 확인
   - [✓] 포트폴리오 검토
   - [?] 수익 증빙 미흡

6. 추가 정보 요청 또는 승인/거절 결정
7. [승인] "승인" 버튼 클릭
8. 승인 확인 모달:
   - 초기 등급: Bronze
   - 수수료율: 20%
9. "확인" 클릭
10. 박지훈에게 승인 알림 및 이메일 발송
11. 튜터 목록에 추가됨

사후조건:
- Tutor.is_active = true
- 튜터 가이드 이메일 자동 발송
- 신청자에게 환영 알림

예외 상황:
- E1: 거절 시 → 거절 사유 입력 필수
- E2: 추가 정보 요청 → 신청자에게 메시지 발송
```

---

### UC-203: 콘텐츠 관리

#### 시나리오 1: 부적절한 추천 삭제
```
사용자 스토리:
"관리자는 신고된 부적절한 추천을 검토하여 
플랫폼의 신뢰도를 유지하고 싶다."

단계:
1. 관리자가 "콘텐츠 관리" → "신고 내역" 메뉴를 클릭한다
2. 신고된 추천 목록이 표시된다:

   | 튜터        | 추천        | 신고 사유          | 신고 수 | 날짜       |
   |------------|------------|-------------------|--------|-----------|
   | ScamTutor  | DOGE +500% | 과장 광고, 사기 의심 | 15건   | 2025-12-02|

3. 해당 추천을 클릭하여 상세 확인:
   - 추천 내용: "Dogecoin 500% 상승 확실!"
   - 근거: 미흡
   - 신고 내역:
     * "현실성 없는 목표"
     * "사기 같음"
     * "과장 광고"

4. 추천 내용과 튜터 이력 검토
5. 삭제 결정
6. "삭제" 버튼 클릭
7. 삭제 사유 입력:
   "과도한 목표 설정 및 근거 부족으로 커뮤니티 가이드라인 위반"
8. "확인" 클릭
9. 추천이 삭제되고 튜터에게 경고 알림 발송
10. 신고자들에게 "조치 완료" 알림 발송

사후조건:
- CoinRecommendation 삭제 (soft delete)
- 튜터 경고 누적
- 튜터 온도(temperature) 하락

예외 상황:
- E1: 정당한 추천 → 신고 기각 및 신고자에게 안내
```

---

### UC-204: 시스템 통계 및 모니터링

#### 시나리오 1: 플랫폼 전체 통계 확인
```
사용자 스토리:
"관리자는 플랫폼의 전체 현황을 파악하여 
비즈니스 의사결정에 활용하고 싶다."

단계:
1. 관리자가 관리자 대시보드에 로그인한다
2. 메인 대시보드에 전체 통계가 표시된다:

   ┌─────────────────────────────────────────────────────────┐
   │ 플랫폼 전체 현황                                        │
   │                                                          │
   │ 사용자                                                   │
   │ - 총 회원: 12,345명 (+234 이번 주)                     │
   │ - 활성 사용자: 8,901명 (72.1%)                          │
   │ - 신규 가입: 234명 (이번 주)                            │
   │                                                          │
   │ 튜터                                                     │
   │ - 총 튜터: 87명 (+3 이번 주)                           │
   │ - 활성 튜터: 78명 (89.7%)                              │
   │ - 신청 대기: 5명                                        │
   │                                                          │
   │ 구독                                                     │
   │ - 활성 구독: 3,456건                                    │
   │ - 총 구독 수익: $98,765/월                              │
   │ - 평균 구독료: $28.57                                   │
   │                                                          │
   │ 추천                                                     │
   │ - 총 추천: 2,341개                                      │
   │ - 평균 성공률: 68.3%                                    │
   │ - 진행 중: 156개                                        │
   │                                                          │
   │ 결제                                                     │
   │ - 이번 달 결제: $245,789                                │
   │ - 플랫폼 수수료: $49,158 (20%)                          │
   │ - 환불: $3,456 (1.4%)                                   │
   └─────────────────────────────────────────────────────────┘

3. 상세 차트:
   - 일별 활성 사용자 (라인 차트)
   - 월별 수익 추이 (바 차트)
   - 튜터 등급 분포 (파이 차트)
   - 코인별 추천 현황 (바 차트)

4. 시스템 상태:
   - 서버 상태: 정상 🟢
   - 데이터베이스: 정상 🟢
   - Redis 캐시: 정상 🟢
   - 외부 API: 정상 🟢

사후조건:
- 통계 데이터 캐싱
- 리포트 생성 가능

예외 상황:
- E1: 시스템 장애 감지 → 즉시 알림 발송
```

---

## 🤖 시스템 자동화 유스케이스

### UC-301: 추천 달성 자동 확인

#### 시나리오 1: 목표 가격 도달 감지 및 상태 업데이트
```
시스템 프로세스:
"시스템은 매시간 모든 진행 중인 추천의 목표 달성 여부를 확인하고 
자동으로 상태를 업데이트한다."

단계:
1. Celery Beat가 매시간 정각에 작업을 트리거한다
2. check_recommendation_achievement 작업이 실행된다
3. status='pending'인 모든 추천을 조회한다
4. 각 추천에 대해:
   a. 코인의 현재 가격을 외부 API에서 조회
   b. 현재 가격 >= 목표 가격인지 확인
   c. [달성] 추천 상태를 'achieved'로 업데이트
   d. achieved_at = NOW()
   e. 튜터의 통계 업데이트 (success_rate, temperature)
   f. 구독자들에게 알림 발송
5. target_date가 지난 미달성 추천:
   a. 상태를 'failed'로 업데이트
   b. 튜터의 통계 업데이트
   c. 튜터에게 알림 발송
6. 처리 결과 로그 기록:
   - 확인한 추천 수
   - 달성된 추천 수
   - 실패한 추천 수
   - 처리 시간

사후조건:
- CoinRecommendation 상태 업데이트
- Tutor 통계 업데이트
- Notification 생성

예외 상황:
- E1: 외부 API 오류 → 재시도 로직 (3회)
- E2: 데이터베이스 오류 → 트랜잭션 롤백
- E3: 처리 시간 초과 → 다음 주기로 이월
```

---

### UC-302: 구독 만료 처리

#### 시나리오 1: 만료 예정 구독 알림 발송
```
시스템 프로세스:
"시스템은 매일 만료 3일 전인 구독을 찾아 
사용자에게 알림을 발송한다."

단계:
1. Celery Beat가 매일 오전 9시에 작업을 트리거한다
2. send_expiring_subscription_notifications 작업이 실행된다
3. expires_at이 3일 후인 활성 구독을 조회한다
4. 각 구독에 대해:
   a. 사용자 정보 조회
   b. 튜터 정보 조회
   c. 알림 생성:
      제목: "구독이 곧 만료됩니다"
      내용: "CryptoKing 튜터의 구독이 3일 후 만료됩니다. 
             계속 이용하시려면 자동 갱신을 확인해주세요."
   d. 푸시 알림 발송
   e. 이메일 발송
5. 처리 결과 로그 기록

사후조건:
- Notification 생성
- 이메일 발송
- 푸시 알림 발송

예외 상황:
- E1: 이메일 발송 실패 → 재시도 큐에 추가
- E2: 푸시 발송 실패 → 앱 내 알림만 생성
```

---

## 📊 유스케이스 매트릭스

### 액터별 주요 유스케이스 요약

| 유스케이스 | 일반 사용자 | 튜터 | 관리자 | 시스템 |
|-----------|------------|------|--------|--------|
| 회원가입/로그인 | ✅ | ✅ | ✅ | - |
| 튜터 검색 | ✅ | - | ✅ | - |
| 튜터 구독 | ✅ | - | - | - |
| 추천 조회 | ✅ | ✅ | ✅ | - |
| 추천 등록 | - | ✅ | - | - |
| 튜터 신청 | ✅ | - | - | - |
| 튜터 승인 | - | - | ✅ | - |
| 성과 확인 | - | ✅ | ✅ | - |
| 사용자 관리 | - | - | ✅ | - |
| 추천 달성 확인 | - | - | - | ✅ |
| 구독 만료 처리 | - | - | - | ✅ |

---

## 🔄 유스케이스 흐름도

### 전체 사용자 여정 (User Journey)

```
[신규 사용자]
    │
    ├─> 1. 회원가입 (Google OAuth)
    │
    ├─> 2. 이메일 인증
    │
    ├─> 3. 튜터 탐색
    │       │
    │       ├─> 3-1. 랭킹 조회
    │       ├─> 3-2. 검색/필터
    │       └─> 3-3. 튜터 상세 조회
    │
    ├─> 4. 튜터 구독
    │       │
    │       ├─> 4-1. 결제 진행
    │       └─> 4-2. 구독 완료
    │
    ├─> 5. 추천 조회
    │       │
    │       ├─> 5-1. 최신 추천 확인
    │       ├─> 5-2. 상세 분석 읽기
    │       └─> 5-3. 알림 설정
    │
    ├─> 6. 알림 수신
    │       │
    │       ├─> 6-1. 목표 달성 알림
    │       ├─> 6-2. 새 추천 알림
    │       └─> 6-3. 구독 만료 알림
    │
    └─> 7. 구독 관리
            │
            ├─> 7-1. 구독 연장
            └─> 7-2. 구독 해지

[튜터 후보]
    │
    ├─> 1. 일반 회원가입
    │
    ├─> 2. 튜터 신청
    │
    ├─> 3. 승인 대기
    │
    └─> [승인] 튜터 활동
            │
            ├─> 4. 프로필 설정
            │
            ├─> 5. 첫 추천 등록
            │
            ├─> 6. 구독자 획득
            │
            ├─> 7. 추천 관리
            │       │
            │       ├─> 7-1. 새 추천 등록
            │       ├─> 7-2. 추천 수정
            │       └─> 7-3. 추천 삭제
            │
            ├─> 8. 성과 확인
            │       │
            │       ├─> 8-1. 통계 조회
            │       ├─> 8-2. 수익 확인
            │       └─> 8-3. 등급 관리
            │
            └─> 9. 구독자 관리
```

---

## 🎯 비기능적 요구사항

### 성능 요구사항
- 튜터 목록 조회: 2초 이내 응답
- 추천 등록: 3초 이내 완료
- 알림 발송: 1분 이내 전달
- 통계 조회: 5초 이내 응답

### 보안 요구사항
- 모든 결제는 HTTPS를 통해 처리
- 개인정보는 암호화하여 저장
- 세션 타임아웃: 24시간
- 비밀번호는 bcrypt로 해싱

### 가용성 요구사항
- 시스템 가용성: 99.9% 이상
- 계획된 유지보수: 주 1회, 새벽 시간
- 자동 백업: 매일 자동 실행
- 장애 복구 시간: 1시간 이내

---

## 📝 향후 확장 유스케이스

### Phase 2 (3-6개월)
- **UC-401**: 튜터 리뷰 및 평점 시스템
- **UC-402**: 포트폴리오 추적 기능
- **UC-403**: 소셜 기능 (팔로우, 댓글)
- **UC-404**: 실시간 채팅
- **UC-405**: 튜터 추천 공유링크 페이지 (추천인 시스템)

### Phase 3 (6-12개월)
- **UC-501**: AI 기반 추천 시스템
- **UC-502**: 다중 통화 지원
- **UC-503**: 모바일 앱 전용 기능
- **UC-504**: 튜터 커뮤니티 포럼

---

## 🔗 UC-405: 튜터 추천 공유링크 페이지 (상세)

### 개요
튜터가 자신의 프로필 또는 추천을 외부에 공유할 수 있는 공유링크 페이지를 제공합니다. 이를 통해 추천인 시스템을 구축하고 마케팅 효과를 높입니다.

### 시나리오 1: 튜터가 공유링크 생성
```
사용자 스토리:
"튜터 박지훈은 자신의 프로필을 SNS나 블로그에 공유하여 
더 많은 구독자를 유치하고 싶다."

단계:
1. 박지훈이 튜터 대시보드에 접속한다
2. "공유링크 관리" 메뉴를 클릭한다
3. 공유링크 생성 옵션이 표시된다:
   - 프로필 공유링크: cointutor.com/t/cryptomaster
   - 특정 추천 공유링크: cointutor.com/r/abc123
4. "링크 복사" 버튼 클릭
5. QR 코드 다운로드 옵션 제공
6. SNS 직접 공유 버튼 (Twitter, Telegram, 카카오톡)
7. 공유링크 통계 확인:
   - 총 클릭 수
   - 클릭 → 구독 전환율
   - 유입 경로별 분석

사후조건:
- 공유링크 클릭 로그 저장
- 추천인 코드 연동 (있는 경우)
```

### 시나리오 2: 추천인 코드를 통한 가입
```
사용자 스토리:
"사용자 이수진은 친구의 추천으로 CoinTutor에 가입하고 
추천인에게 보상을 제공하고 싶다."

단계:
1. 이수진이 친구로부터 받은 추천 링크를 클릭한다
   - URL: cointutor.com/invite/FRIEND123
2. 추천 튜터의 프로필 페이지가 표시된다
3. 상단에 "FRIEND123님의 추천으로 방문하셨습니다" 배너 표시
4. 회원가입 시 자동으로 추천인 코드가 적용된다
5. 가입 완료 후:
   - 이수진: 첫 구독 시 10% 할인 혜택
   - 추천인 (친구): 추천 보상 5 USDT 적립
6. 추천인 보상 정책:
   - 가입만: 1 USDT
   - 첫 구독 시: 추가 5 USDT
   - 추천인당 월 최대 100 USDT

사후조건:
- Referral 레코드 생성
- 추천인 보상 자동 적립
- 추천인에게 알림 발송
```

### 시나리오 3: 공유링크 페이지 랜딩
```
사용자 스토리:
"비회원 방문자가 튜터 공유링크를 통해 
튜터 정보를 확인하고 가입을 결정하고 싶다."

단계:
1. 비회원이 공유링크를 클릭한다
2. 튜터 공개 프로필 페이지가 표시된다:
   
   ┌─────────────────────────────────────────────────────────┐
   │ CryptoMaster 🥇 Gold                                    │
   │ ────────────────────────────────────────────────────── │
   │ 🔥 온도: 85°C                                           │
   │ 📈 성공률: 87.5%                                        │
   │ 👥 구독자: 1,234명                                      │
   │ 📊 총 추천: 124개                                       │
   │                                                          │
   │ "10년간의 암호화폐 투자 경험을 바탕으로..."            │
   │                                                          │
   │ [최근 성공한 추천 미리보기]                             │
   │ ✅ BTC +18.5% (2025-01-15)                              │
   │ ✅ ETH +22.3% (2025-01-10)                              │
   │ ✅ SOL +35.2% (2025-01-05)                              │
   │                                                          │
   │ 💰 구독료: 29.99 USDT/월                                │
   │                                                          │
   │ [지금 구독하기]  [회원가입]                              │
   └─────────────────────────────────────────────────────────┘

3. 비회원은 상세 추천 내용은 블러 처리되어 표시
4. "지금 구독하기" 클릭 시 회원가입 유도
5. 추천인 코드가 자동으로 세션에 저장됨

사후조건:
- 페이지 뷰 로그 저장
- 추천인 코드 세션 저장 (24시간 유효)
```

---

## 💳 USDT 결제 시스템 상세

### 결제 방식 도입 배경
```
문제점:
- 국내에서 암호화폐 관련 서비스의 지속적인 결제 시스템 승인이 어려움
- 금융당국의 "사행성 조장" 우려로 인한 규제
- 신용카드사의 암호화폐 관련 결제 제한

해결책:
- USDT (Tether) 스테이블코인을 통한 결제 시스템 도입
- 달러 1:1 연동으로 가격 안정성 확보
- 국제 거래 용이 및 빠른 처리 속도
```

### 지원 네트워크
| 네트워크 | 수수료 | 확인 시간 | 권장 |
|----------|--------|-----------|------|
| TRC-20 (Tron) | ~1 USDT | 1-3분 | ⭐ 권장 |
| ERC-20 (Ethereum) | ~5-20 USDT | 5-15분 | 소액 비권장 |
| BEP-20 (BSC) | ~0.5 USDT | 1-3분 | 대안 |

### 결제 플로우
```
1. 사용자가 구독 요청
2. 시스템이 고유 입금 주소 생성
3. 사용자가 USDT 송금
4. 블록체인 확인 (3-6 컨펌)
5. 결제 완료 및 구독 활성화
6. 자동 환불 정책: 
   - 구독 시작 24시간 이내: 전액 환불
   - 7일 이내: 50% 환불
   - 7일 이후: 환불 불가
```

---

## 📊 등급별 추천 등록 조건

### 등급 시스템 개요
등급이 높아질수록 구독자에게 더 높은 신뢰성을 보장해야 합니다. 이를 위해 등급별로 차등화된 추천 등록 조건을 적용합니다.

### 등급별 조건표
| 등급 | 최소 보장 기간 | 최소 목표 상승률 | 설명 |
|------|--------------|-----------------|------|
| Bronze | 7일 | 5% | 신규 튜터, 기본 조건 |
| Silver | 14일 | 10% | 초기 실적 검증됨 |
| Gold | 21일 | 15% | 안정적인 추천 이력 |
| Platinum | 30일 | 20% | 고성과 튜터 |
| Diamond | 45일 | 25% | 최상위 튜터, 프리미엄 |

### 조건 적용 규칙
```
1. 최소 보장 기간:
   - 추천 등록 시 목표일까지의 기간이 최소 보장 기간 이상이어야 함
   - 예: Gold 튜터가 2025-01-01에 추천 시 목표일은 최소 2025-01-22 이후

2. 최소 목표 상승률:
   - 추천 등록 시 설정하는 목표 상승률이 최소값 이상이어야 함
   - 예: Platinum 튜터는 최소 20% 이상의 상승률 목표 설정 필요

3. 위반 시:
   - 시스템에서 자동 검증 후 등록 거부
   - "Gold 등급은 최소 21일 이상의 보장 기간이 필요합니다" 메시지 표시

4. 등급 혜택:
   - 높은 등급의 튜터는 더 긴 기간과 높은 상승률을 보장하므로 구독자 신뢰도 향상
   - 랭킹 페이지에서 등급별 조건 표시로 투명성 확보
```

### 등급 승급 시스템

튜터의 성공률이 **100%**에 도달하면 자동으로 다음 등급으로 승급됩니다.

#### 승급 조건표
| 현재 등급 | 승급 조건 | 다음 등급 | 필요 최소 추천 수 |
|----------|----------|----------|-----------------|
| Bronze | 성공률 100% | Silver | 최소 5개 추천 |
| Silver | 성공률 100% | Gold | 최소 10개 추천 |
| Gold | 성공률 100% | Platinum | 최소 20개 추천 |
| Platinum | 성공률 100% | Diamond | 최소 30개 추천 |
| Diamond | - | (최고 등급) | - |

#### 월별 최소 추천 갯수 조건
등급 유지를 위해 매월 최소 추천 갯수를 등록해야 합니다. **미달성 시 실패 건으로 처리됩니다.**

| 등급 | 월 최소 추천 갯수 | 미달성 시 |
|------|-----------------|----------|
| Bronze | 없음 (제약 없음) | - |
| Silver | 2개/월 | 실패 1건 추가 |
| Gold | 3개/월 | 실패 1건 추가 |
| Platinum | 4개/월 | 실패 1건 추가 |
| Diamond | 5개/월 | 실패 1건 추가 |

```
월별 최소 추천 규칙:
1. 매월 1일~말일 기준으로 추천 갯수 집계
2. 월말에 최소 갯수 미달 시 자동으로 실패 1건으로 처리
3. Bronze 등급은 신규 튜터를 위해 월별 최소 조건 면제
4. 실패 처리 시 튜터에게 알림 발송:
   "⚠️ 이번 달 최소 추천 갯수(3개)를 충족하지 못해 실패 1건이 추가되었습니다."
```

#### 승급 규칙
```
1. 성공률 100% 달성:
   - 해당 등급에서 등록한 모든 추천이 성공(achieved)해야 함
   - 진행 중(pending) 추천은 성공률 계산에서 제외
   - 실패(failed) 추천이 1개라도 있으면 승급 불가

2. 최소 추천 수 충족:
   - 각 등급에서 최소 추천 수를 달성해야 승급 가능
   - 예: Bronze에서 Silver로 승급하려면 최소 5개 추천 성공 필요

3. 자동 승급 처리:
   - 시스템이 매일 자동으로 승급 조건을 검토
   - 조건 충족 시 즉시 등급 업데이트
   - 튜터에게 "🎉 축하합니다! Gold 등급으로 승급되었습니다" 알림 발송

4. 승급 시 변경 사항:
   - 새로운 등급의 최소 보장 기간/상승률 조건 적용
   - 프로필에 새 등급 배지 표시
   - 랭킹 재계산
```

### 등급 강등 시스템

추천 실패가 발생하면 실패 건수가 누적되고, 일정 조건 충족 시 등급이 강등됩니다.

#### 강등 조건표
| 현재 등급 | 강등 조건 | 강등 등급 |
|----------|----------|----------|
| Diamond | 실패 3건 누적 | Platinum |
| Platinum | 실패 3건 누적 | Gold |
| Gold | 실패 2건 누적 | Silver |
| Silver | 실패 2건 누적 | Bronze |
| Bronze | - | (최저 등급, 강등 없음) |

#### 실패 건수 처리 규칙
```
1. 실패 발생 케이스:
   - 추천이 목표일까지 목표가에 도달하지 못함 (status: failed)
   - 월별 최소 추천 갯수 미달성 시 실패 1건 자동 추가

2. 실패 건수 표시:
   - 튜터 프로필에 실패 건수 표시
   - 구독자에게 투명하게 공개
   - 예: "총 추천: 50개 | 성공: 45개 | 실패: 5개 | 성공률: 90%"

3. 강등 처리:
   - 시스템이 매일 자동으로 강등 조건 검토
   - 조건 충족 시 즉시 등급 하락
   - 튜터에게 "⚠️ 실패 누적으로 Gold 등급으로 강등되었습니다" 알림 발송
   - 온도(temperature) -10°C 페널티

4. 실패 건수 리셋:
   - 강등 후 실패 건수는 0으로 리셋
   - 새 등급에서 다시 실패 건수 누적 시작

5. Bronze 등급:
   - 최저 등급으로 더 이상 강등 없음
   - 단, 실패 건수는 계속 누적되어 표시됨
```

#### 강등 시나리오 예시
```
사용자 스토리:
"튜터 박지훈(Gold)이 추천 실패 2건으로 Silver로 강등된다."

단계:
1. 박지훈이 Gold 등급에서 활동 중
2. 첫 번째 추천이 목표일까지 목표가 미달성 → 실패 1건
3. 해당 월 최소 추천 갯수(3개) 미달성 → 실패 1건 추가
4. 시스템이 자동으로 강등 조건 확인:
   - 현재 등급: Gold
   - 누적 실패: 2건
   - 강등 조건: 2건 ✓
5. 박지훈의 등급이 Silver로 강등
6. 알림 발송: "⚠️ 실패 누적으로 Silver 등급으로 강등되었습니다"
7. 변경 사항:
   - 실패 건수 0으로 리셋
   - 온도 -10°C 페널티
   - 새로운 등급 조건 적용 (최소 보장 14일, 최소 상승률 10%)

사후조건:
- Tutor.grade = 'Silver'
- 강등 이력 저장
- 실패 건수 리셋
```

#### 승급 시나리오 예시
```
사용자 스토리:
"튜터 박지훈(Bronze)이 5개의 추천을 모두 성공시켜 Silver로 승급한다."

단계:
1. 박지훈이 Bronze 등급에서 5개의 코인 추천을 등록한다
2. 모든 추천이 목표가에 도달하여 'achieved' 상태가 된다
3. 시스템이 자동으로 승급 조건을 확인:
   - 성공률: 100% (5/5) ✓
   - 최소 추천 수: 5개 ✓
4. 박지훈의 등급이 Silver로 자동 업데이트된다
5. 알림 발송: "🎉 축하합니다! Silver 등급으로 승급되었습니다!"
6. 이제 박지훈은 다음 조건을 적용받음:
   - 최소 보장 기간: 14일
   - 최소 목표 상승률: 10%

사후조건:
- Tutor.grade = 'Silver'
- 승급 이력 저장
- 온도(temperature) +5°C 보너스
```

---

## 📚 참고 문서

- [데이터베이스 스키마](./DATABASE_SCHEMA.md)
- [기술 명세서](./TECHNICAL_SPEC.md)
- [API 명세서](./FRONTEND_API_SPECIFICATION.md)
- [시스템 아키텍처](./README.md)

**문서 버전**: 1.0  
**최종 업데이트**: 2025-12-02  
**작성자**: CoinTutor Development Team

